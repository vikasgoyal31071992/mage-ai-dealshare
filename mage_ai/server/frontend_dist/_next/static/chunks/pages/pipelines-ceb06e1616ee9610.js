(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return Re}});var t=i(77837),o=i(75582),u=i(21831),r=i(82394),l=i(38860),c=i.n(l),s=i(12691),d=i.n(s),a=i(82684),p=i(69864),f=i(34376),v=i(52749),h=i(60523),m=i(71180),g=i(90299),b=i(31882),j=i(76111),Z=i(94629),x=i(97618),_=i(55485),C=i(85854),w=i(68562),y=i(65956),P=i(38276),k=i(30160),I=i(35576),T=i(17488),S=i(28598);var O=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,o=e.minWidth,u=e.noEmptyValue,r=e.onClose,l=e.onSave,c=e.textArea,s=e.title,d=e.value,p=(0,a.useRef)(null),f=(0,a.useState)(d),v=f[0],h=f[1],g=c?I.Z:T.Z;return(0,a.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,S.jsxs)(y.Z,{maxWidth:t,minWidth:o,children:[(0,S.jsx)(k.ZP,{bold:!0,children:s}),(0,S.jsx)(P.Z,{mt:1,children:(0,S.jsx)(g,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:p,rows:c?7:null,value:v})}),n&&(0,S.jsx)(P.Z,{mt:2,children:(0,S.jsx)(k.ZP,{muted:!0,small:!0,children:n})}),(0,S.jsx)(P.Z,{mt:3,children:(0,S.jsxs)(_.ZP,{children:[(0,S.jsx)(w.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===d||u&&!v?r():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,S.jsx)(P.Z,{ml:1}),(0,S.jsx)(m.ZP,{onClick:r,children:"Cancel"})]})})]})},E=i(48670),A=i(55072),D=i(57653),M=i(55729),R=i(93808),G=i(82359),$=i(44085),N=i(4190),U=i(75499),L=i(48381),B=i(69650),H=i(85544),F=i(70026),Y=i(35686),z=i(44897),Q=i(77417),V=i(42631),W=i(44425),q=i(72473),K=i(23780),X=i(8666),J=i(46684),ee=i(53808),ne="pipeline_list_filters",ie="pipeline_list_group_bys",te="pipeline_list_sort_column_index",oe="pipeline_list_sort_direction",ue="pipeline_list_selected_tab_uuid";function re(e){return(0,ee.t8)(ne,e),e}function le(e){return(0,ee.t8)(ie,e),e}var ce=i(11498),se=i(32929),de=i(44898),ae=i(70515),pe=i(30229),fe=i(81655),ve=i(31608),he=i(81728),me=i(3917),ge=i(72619),be=i(69419),je=i(65458),Ze=i(15610),xe=i(42122),_e=i(95924),Ce=i(86735),we=i(70320),ye=i(89538),Pe=i(44952);function ke(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ie(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ke(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ke(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Te={Icon:q.Schedule,label:function(){return"Recently viewed"},uuid:"recent"},Se={Icon:q.PipelineV3,label:function(e){return null!==e&&void 0!==e&&e.count?"All pipelines \u203a ".concat((null===e||void 0===e?void 0:e.count)||0):"All pipelines"},uuid:"all"},Oe=[Se,Te],Ee="tab",Ae=[D.$1.SEARCH],De={borderRadius:"".concat(V.BG,"px"),iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function Me(){var e,n=(0,f.useRouter)(),i=(0,a.useRef)(null),t=(0,a.useRef)(null),l=(0,a.useRef)(null),c=(0,a.useRef)(null),s=(0,Q.Z)(),w=s.fetchProjects,I=s.project,T=(0,a.useState)(null),R=T[0],V=T[1],ke=(0,a.useState)(null),Me=ke[0],Re=ke[1],Ge=(0,a.useState)(null),$e=Ge[0],Ne=Ge[1],Ue=(0,a.useCallback)((function(e){Ne(e),clearTimeout(c.current),c.current=setTimeout((function(){var n;return(0,Ze.u)((n={},(0,r.Z)(n,ce.$D.OFFSET,0),(0,r.Z)(n,D.$1.SEARCH,e),n))}),500)}),[Ne]),Le=(0,a.useState)({}),Be=Le[0],He=Le[1],Fe=(0,a.useState)(null),Ye=Fe[0],ze=Fe[1],Qe=(0,be.iV)(),Ve=Ie({},(0,be.DQ)(Qe,[D.$1.SEARCH,D.$1.STATUS,D.$1.TAG,D.$1.TYPE].concat((0,u.Z)(ce.RG)))),We=(0,a.useMemo)((function(){return null===Qe||void 0===Qe?void 0:Qe.tab}),[Qe]);(0,a.useEffect)((function(){var e;V(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Qe,i]);var qe=(0,a.useMemo)((function(){var e;return(0,we.hY)(null===I||void 0===I||null===(e=I.features)||void 0===e?void 0:e[G.d.LOCAL_TIMEZONE])}),[null===I||void 0===I?void 0:I.features]),Ke=(0,a.useMemo)((function(){var e;return null===I||void 0===I||null===(e=I.features)||void 0===e?void 0:e[G.d.OPERATION_HISTORY]}),[I]),Xe=(0,a.useMemo)((function(){return qe?fe.O$:{}}),[qe]),Je=Y.ZP.pipelines.list(Ie(Ie({},Ve),{},{include_schedules:1}),{revalidateOnFocus:!1}),en=Je.data,nn=Je.mutate,tn=(0,a.useMemo)((function(){return(null===Qe||void 0===Qe?void 0:Qe[D.$1.HISTORY_DAYS])||7}),[Qe]),on=Y.ZP.pipelines.list(Ie(Ie({},Ve),{},(e={},(0,r.Z)(e,D.$1.HISTORY_DAYS,(0,he.HW)(tn)?Number(tn):tn),(0,r.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!Ke||!We||Te.uuid!==We}),un=on.data,rn=on.mutate,ln=(0,a.useCallback)((function(e){return e}),[]),cn=(0,a.useMemo)((function(){var e=ln((null===en||void 0===en?void 0:en.pipelines)||[]);if(null!==Qe&&void 0!==Qe&&Qe[D.$1.TAG]){var n=Qe[D.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(D.$1.NO_TAGS)}))}return e}),[en,ln,Qe]),sn=(0,a.useMemo)((function(){return ln((null===un||void 0===un?void 0:un.pipelines)||[])}),[un,ln]),dn=(0,a.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),an=null===Qe||void 0===Qe?void 0:Qe[fe.lG.SORT_COL_IDX],pn=null===Qe||void 0===Qe?void 0:Qe[fe.lG.SORT_DIRECTION],fn=(0,a.useMemo)((function(){return an?{columnIndex:+an,sortDirection:pn||fe.sh.ASC}:void 0}),[an,pn]),vn=null===Qe||void 0===Qe?void 0:Qe[D.$1.GROUP],hn=(0,p.Db)((function(e){var n=e.pipelineUUID,i=e.filesOnly,t=void 0!==i&&i;return Y.ZP.downloads.pipelines.useCreate(n)({download:{ignore_folder_structure:t}})}),{onSuccess:function(e){return(0,ge.wD)(e,{callback:function(){var n=e.data.download.token;(0,Pe.K)(n)},onErrorCallback:function(e,n){return ze({errors:n,response:e})}})}}),mn=(0,o.Z)(hn,1)[0];(0,a.useEffect)((function(){null!==Ve&&void 0!==Ve&&Ve[D.$1.SEARCH]&&null===$e&&Ne(null===Ve||void 0===Ve?void 0:Ve[D.$1.SEARCH])}),[Ve,$e,Ne]),(0,a.useEffect)((function(){var e,n={};if(!an){var i=(0,ee.U2)(te,null),t=(0,ee.U2)(oe,fe.sh.ASC);null!==i&&(n[fe.lG.SORT_COL_IDX]=i,n[fe.lG.SORT_DIRECTION]=t)}Ke&&(We?(0,ee.t8)(ue,We):n.tab=(0,ee.U2)(ue,null===Oe||void 0===Oe||null===(e=Oe[0])||void 0===e?void 0:e.uuid));if(vn)le((0,r.Z)({},vn,!0));else{var u,l=(0,ee.U2)(ie,{});l&&Object.entries(l).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];!u&&t&&(u=i)})),u&&(n[D.$1.GROUP]=u)}if((0,xe.Qr)(Ve)){var c=(0,r.Z)({},ce.$D.LIMIT,A.Q),s=(0,ee.U2)(ne,{});s&&Object.entries(s).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];"undefined"!==typeof t&&null!==t&&(ce.RG.includes(i)||Ae.includes(i)?c[i]=t:(c[i]=[],Object.entries(t).forEach((function(e){var n=(0,o.Z)(e,2),t=n[0];n[1]&&c[i].push(t)}))))})),(0,xe.Qr)(c)||(n={},Object.entries(Ie(Ie({},n),c)||{}).forEach((function(e){var i=(0,o.Z)(e,2),t=i[0],u=i[1];"undefined"!==typeof u&&null!==u&&(n[t]=u)})))}else{var d={};Object.entries(Ve).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];d[i]={};var u,r=t;"undefined"!==typeof t&&null!==t&&(ce.RG.includes(i)||Ae.includes(i)?d[i]=r:(Array.isArray(r)||(r=[r]),r&&Array.isArray(r)&&(null===(u=r)||void 0===u||u.forEach((function(e){d[i][e]=!0})))))})),re((0,xe.hB)(d))}(0,xe.Qr)(n)||(0,Ze.u)((0,xe.hB)(n),{pushHistory:!1})}),[vn,Ke,Ve,We,dn,an,pn]),(0,a.useEffect)((function(){(0,ge.bB)(en,ze)}),[en]);var gn=function(e){return(0,p.Db)(Y.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,ge.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null===e||void 0===e||e(i)},onErrorCallback:function(e,n){return ze({errors:n,response:e})}})}})},bn=gn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),jn=(0,o.Z)(bn,2),Zn=jn[0],xn=jn[1].isLoading,_n=gn((function(){null===nn||void 0===nn||nn(),null===rn||void 0===rn||rn()})),Cn=(0,o.Z)(_n,2),wn=Cn[0],yn=Cn[1].isLoading,Pn=(0,p.Db)((function(e){return Y.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,ge.wD)(e,{callback:function(e){var n=e.pipeline.uuid;He((function(e){return Ie(Ie({},e),{},(0,r.Z)({},n,!1))})),nn(),null===rn||void 0===rn||rn(),null===Ln||void 0===Ln||Ln(),Re(null)},onErrorCallback:function(e,n){var i,t=null===e||void 0===e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;He((function(e){return Ie(Ie({},e),{},(0,r.Z)({},t,!1))})),ze({errors:n,response:e})}})}}),kn=(0,o.Z)(Pn,2),In=kn[0],Tn=kn[1].isLoading,Sn=(0,p.Db)((function(e){return Y.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,ge.wD)(e,{callback:function(){null===nn||void 0===nn||nn(),null===rn||void 0===rn||rn()},onErrorCallback:function(e,n){return ze({errors:n,response:e})}})}}),On=(0,o.Z)(Sn,2),En=On[0],An=On[1].isLoading,Dn=(0,ye.dd)((function(e){var n=e.pipelineType;return(0,S.jsx)(j.Z,{onClose:Gn,onSave:function(e){var i=e.name,t=e.description,o=e.tags;Zn({pipeline:{description:t,name:i,tags:o,type:n}})},pipelineType:n})}),{},[Zn],{background:!0,disableEscape:!0,uuid:"overview/create_pipeline"}),Mn=(0,o.Z)(Dn,2),Rn=Mn[0],Gn=Mn[1],$n=(0,ye.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,t=e.pipelineName;return(0,S.jsx)(O,{isLoading:Tn,minWidth:55*ae.iI,noEmptyValue:!!t,onClose:Ln,onSave:function(e){var i=n||Me;if(i){var o=i.uuid,u={uuid:o};t?u.name=e:u.description=e,He((function(e){return Ie(Ie({},e),{},(0,r.Z)({},o,!0))})),In(u)}},textArea:!t,title:t?"Rename pipeline":"Edit description for ".concat(null===n||void 0===n?void 0:n.uuid),value:t||i})}),{},[Tn,Me],{background:!0,uuid:"rename_pipeline_and_save"}),Nn=(0,o.Z)($n,2),Un=Nn[0],Ln=Nn[1],Bn=(0,ye.dd)((function(){return(0,S.jsx)(F.Z,{fetchPipelines:nn,onCancel:Yn})}),{},[nn],{background:!0,uuid:"upload_pipeline"}),Hn=(0,o.Z)(Bn,2),Fn=Hn[0],Yn=Hn[1],zn=(0,ye.dd)((function(){return(0,S.jsx)(K.BC,{children:(0,S.jsx)(h.Z,{contained:!0,onClickCustomTemplate:function(e){Zn({pipeline:{custom_template_uuid:null===e||void 0===e?void 0:e.template_uuid,name:(0,he.Y6)()}}).then((function(){Wn()}))},showBreadcrumbs:!0,tabs:[se.A2]})})}),{},[Zn],{background:!0,uuid:"browse_templates"}),Qn=(0,o.Z)(zn,2),Vn=Qn[0],Wn=Qn[1],qn=(0,ye.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,S.jsx)(K.BC,{children:(0,S.jsx)(M.Z,{cancelButtonText:n,contained:!0,header:(0,S.jsx)(P.Z,{mb:ae.HN,children:(0,S.jsxs)(y.Z,{children:[(0,S.jsx)(k.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,S.jsx)(P.Z,{mt:1,children:(0,S.jsxs)(k.ZP,{warning:!0,children:["Read ",(0,S.jsx)(E.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){null===i||void 0===i||i(),Jn()},onSaveSuccess:function(e){w(),Jn(),null===t||void 0===t||t(e)}})})}),{},[w],{background:!0,uuid:"configure_project"}),Kn=(0,o.Z)(qn,2),Xn=Kn[0],Jn=Kn[1],ei=(0,ye.dd)((function(){return(0,S.jsx)(K.BC,{children:(0,S.jsx)(v.Z,{createPipeline:Zn,isLoading:xn,onClose:ti})})}),{},[Zn,xn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),ni=(0,o.Z)(ei,2),ii=ni[0],ti=ni[1],oi=(0,a.useMemo)((function(){return(0,je.d)(Zn,{showAIModal:function(){null!==I&&void 0!==I&&I.openai_api_key?ii():Xn({onSaveSuccess:function(){ii()}})},showBrowseTemplates:Vn,showCreatePipelineModal:Rn,showImportPipelineModal:Fn})}),[Zn,I,ii,Vn,Xn,Rn,Fn]),ui=Y.ZP.tags.list().data,ri=(0,a.useMemo)((function(){return(0,Ce.YC)((null===ui||void 0===ui?void 0:ui.tags)||[],(function(e){return e.uuid}))}),[ui]),li=(0,a.useMemo)((function(){return(0,S.jsx)(H.Z,{addButtonProps:{isLoading:xn,label:"New",menuItems:oi},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:An,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===Me||void 0===Me?void 0:Me.uuid,"?"))&&En(null===Me||void 0===Me?void 0:Me.uuid)}},extraActionButtonProps:{Icon:q.Clone,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null===Me||void 0===Me?void 0:Me.uuid,"?"),isLoading:yn,onClick:function(){return wn({pipeline:{clone_pipeline_uuid:null===Me||void 0===Me?void 0:Me.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:D.kA,tag:[D.$1.NO_TAGS].concat((0,u.Z)(ri.map((function(e){return e.uuid})))),type:Object.values(D.qL)},filterValueLabelMapping:{status:D.kA.reduce((function(e,n){return Ie(Ie({},e),{},(0,r.Z)({},n,(0,he.J3)((0,he.kC)(n))))}),{}),tag:Ie((0,r.Z)({},D.$1.NO_TAGS,"No tags"),ri.reduce((function(e,n){var i=n.uuid;return Ie(Ie({},e),{},(0,r.Z)({},i,i))}),{})),type:D.G7},groupButtonProps:{groupByLabel:vn,menuItems:[{beforeIcon:vn===D.r0.STATUS?(0,S.jsx)(q.Check,{fill:z.Z.content.default,size:1.5*ae.iI}):(0,S.jsx)(q.Circle,{muted:!0,size:1.5*ae.iI}),label:function(){return(0,he.kC)(D.r0.STATUS)},onClick:function(){var e=vn===D.r0.STATUS?null:D.r0.STATUS;e||le({}),(0,Ze.u)((0,r.Z)({},D.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:vn===D.r0.TAG?(0,S.jsx)(q.Check,{fill:z.Z.content.default,size:1.5*ae.iI}):(0,S.jsx)(q.Circle,{muted:!0,size:1.5*ae.iI}),label:function(){return(0,he.kC)(D.r0.TAG)},onClick:function(){var e=vn===D.r0.TAG?null:D.r0.TAG;e||le({}),(0,Ze.u)((0,r.Z)({},D.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:vn===D.r0.TYPE?(0,S.jsx)(q.Check,{fill:z.Z.content.default,size:1.5*ae.iI}):(0,S.jsx)(q.Circle,{muted:!0,size:1.5*ae.iI}),label:function(){return(0,he.kC)(D.r0.TYPE)},onClick:function(){var e=vn===D.r0.TYPE?null:D.r0.TYPE;e||le({}),(0,Ze.u)((0,r.Z)({},D.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return Un({pipelineName:null===Me||void 0===Me?void 0:Me.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return Un({pipeline:Me,pipelineDescription:null===Me||void 0===Me?void 0:Me.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){re({}),Ne(""),null===nn||void 0===nn||nn().then((function(){var e;(0,Ze.u)((e={},(0,r.Z)(e,ce.$D.LIMIT,(null===Ve||void 0===Ve?void 0:Ve[ce.$D.LIMIT])||A.Q),(0,r.Z)(e,D.$1.SEARCH,""),e),{replaceParams:!0})}))},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!==e&&void 0!==e&&e.length)}))&&re({})},query:Ve,resetLimitOnFilterApply:!0,searchProps:{onChange:Ue,value:$e},selectedRowId:null===Me||void 0===Me?void 0:Me.uuid,setSelectedRow:Re})}),[wn,En,nn,vn,yn,xn,An,oi,Ve,$e,Me,Ue,Un,ri]),ci=(0,K.VI)(null,{},[],{uuid:"pipelines/list"}),si=(0,o.Z)(ci,1)[0],di=(0,p.Db)(Y.ZP.projects.useUpdate(null===I||void 0===I?void 0:I.name),{onSuccess:function(e){return(0,ge.wD)(e,{callback:function(){w()},onErrorCallback:function(e,n){return si({errors:n,response:e})}})}}),ai=(0,o.Z)(di,2),pi=ai[0],fi=ai[1].isLoading,vi=(0,a.useCallback)((function(e){return pi({project:e})}),[pi]),hi=(0,ye.dd)((function(){return(0,S.jsxs)(y.Z,{maxWidth:60*ae.iI,children:[(0,S.jsx)(P.Z,{mb:1,children:(0,S.jsx)(C.Z,{children:"Help improve Mage"})}),(0,S.jsx)(P.Z,{mb:ae.cd,children:(0,S.jsx)(k.ZP,{default:!0,children:"Please contribute usage statistics to help improve the developer experience for you and everyone in the community \ud83e\udd1d."})}),(0,S.jsx)(P.Z,{mb:ae.cd,children:(0,S.jsx)(y.Z,{success:!0,children:(0,S.jsxs)(_.ZP,{alignItems:"center",children:[(0,S.jsx)(q.Secrets,{size:5*ae.iI,success:!0}),(0,S.jsx)(P.Z,{mr:1}),(0,S.jsx)(x.Z,{children:(0,S.jsx)(k.ZP,{children:"All usage statistics are completely anonymous. It\u2019s impossible for Mage to know which statistics belongs to whom."})})]})})}),(0,S.jsx)(P.Z,{mb:ae.cd,children:(0,S.jsxs)(k.ZP,{default:!0,children:["By opting into sending usage statistics to ",(0,S.jsx)(E.Z,{href:"https://www.mage.ai",openNewWindow:!0,children:"Mage"}),", it\u2019ll help the team and community of contributors (",(0,S.jsx)(E.Z,{href:"https://www.mage.ai/chat",openNewWindow:!0,children:"Magers"}),") learn what\u2019s going wrong with the tool and what improvements can be made."]})}),(0,S.jsx)(P.Z,{mb:ae.cd,children:(0,S.jsx)(k.ZP,{default:!0,children:"In addition to helping reduce potential errors, you\u2019ll help inform which features are useful and which need work."})}),(0,S.jsx)(P.Z,{mb:ae.cd,children:(0,S.jsxs)(_.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,S.jsx)(k.ZP,{bold:!0,children:"I want to help make Mage more powerful for everyone"}),(0,S.jsx)(P.Z,{mr:ae.cd}),(0,S.jsx)(B.Z,{checked:!0,onCheck:function(){window.confirm("Are you sure you don\u2019t want to help everyone in the community?")&&vi({deny_improve_mage:!0,help_improve_mage:!1}).then((function(){return bi()}))}})]})}),fi&&(0,S.jsx)(P.Z,{mb:ae.cd,children:(0,S.jsx)(N.Z,{inverted:!0})}),(0,S.jsx)(P.Z,{mb:ae.cd,children:(0,S.jsxs)(k.ZP,{muted:!0,small:!0,children:["To learn more about how this works, please check out the ",(0,S.jsx)(E.Z,{href:"https://docs.mage.ai/contributing/statistics/overview",openNewWindow:!0,small:!0,children:"documentation"}),"."]})}),(0,S.jsx)(m.ZP,{"data-testid":"help_mage_close_button",onClick:function(){return vi({help_improve_mage:!0}).then((function(){return bi()}))},secondary:!0,children:"Close"})]})}),{},[I],{background:!0,hideCallback:function(){vi({help_improve_mage:!0})},uuid:"help_mage"}),mi=(0,o.Z)(hi,2),gi=mi[0],bi=mi[1];(0,a.useEffect)((function(){I&&null===(null===I||void 0===I?void 0:I.help_improve_mage)&&gi()}),[I,gi]);var ji=(0,a.useCallback)((function(e){var n={};null===e||void 0===e||e.forEach((function(e,i){var t=null===e||void 0===e?void 0:e[vn];if(D.r0.STATUS===vn){var o=(e||{}).schedules,u=void 0===o?[]:o,r=u.length;t=u.find((function(e){var n=e.status;return pe.fq.ACTIVE===n}))?D.QK.ACTIVE:r>=1?D.QK.INACTIVE:D.QK.NO_SCHEDULES}else if(D.r0.TAG===vn){t=(null===e||void 0===e?void 0:e.tags)?(0,Ce.YC)(e.tags,(function(e){return e})).join(", "):""}n[t]||(n[t]=[]),n[t].push(i)}));var i=[],t=[];D.r0.STATUS===vn?Object.values(D.QK).forEach((function(e){i.push(n[e]),t.push((0,he.vg)(e))})):D.r0.TAG===vn?(0,Ce.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?t.push(e.split(", ").map((function(e,n){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,S.jsx)(b.Z,{small:!0,children:(0,S.jsx)(k.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):t.push("No tags")})):D.r0.TYPE===vn&&Object.values(D.qL).forEach((function(e){i.push(n[e]),t.push(D.G7[e])}));var o=[],u=[];return null===i||void 0===i||i.forEach((function(e,n){"undefined"!==typeof e&&null!==e&&(null===e||void 0===e?void 0:e.length)>=1&&(u.push(e),o.push(null===t||void 0===t?void 0:t[n]))})),{rowGroupHeaders:o,rowsGroupedByIndex:u}}),[vn]),Zi=(0,a.useMemo)((function(){return ji(cn)}),[ji,cn]),xi=Zi.rowGroupHeaders,_i=Zi.rowsGroupedByIndex,Ci=(0,a.useMemo)((function(){return ji(sn)}),[ji,sn]),wi=Ci.rowGroupHeaders,yi=Ci.rowsGroupedByIndex,Pi=(0,a.useCallback)((function(e,i,o){return(0,S.jsx)(U.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,he.kC)(D.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,he.kC)(D.r0.TYPE)},Ie(Ie({},Xe),{},{uuid:"Updated at"}),Ie(Ie({},Xe),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],isSelectedRow:function(n){var i;return(null===(i=e[n])||void 0===i?void 0:i.uuid)===(null===Me||void 0===Me?void 0:Me.uuid)},localStorageKeySortColIdx:te,localStorageKeySortDirection:oe,onClickRow:function(n){return Re((function(i){var t=e[n];return(null===i||void 0===i?void 0:i.uuid)!==(null===t||void 0===t?void 0:t.uuid)?t:null}))},onDoubleClickRow:function(i){n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e[i].uuid,"/edit"))},ref:t,renderRightClickMenuItems:function(i){var t=e[i];return[{label:function(){return"Edit description"},onClick:function(){return Un({pipeline:t,pipelineDescription:null===t||void 0===t?void 0:t.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return Un({pipeline:t,pipelineName:null===t||void 0===t?void 0:t.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return wn({pipeline:{clone_pipeline_uuid:null===t||void 0===t?void 0:t.uuid}})},uuid:"clone"},{label:function(){return"Download (keep folder structure)"},onClick:function(){mn({filesOnly:!1,pipelineUUID:null===t||void 0===t?void 0:t.uuid})},uuid:"download_keep_folder_structure"},{label:function(){return"Download (without folder structure)"},onClick:function(){mn({filesOnly:!0,pipelineUUID:null===t||void 0===t?void 0:t.uuid})},uuid:"download_without_folder_structure"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null===t||void 0===t?void 0:t.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(de.R,"&new=1&pipeline_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(X.b.PIPELINE,"&new=1&object_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===t||void 0===t?void 0:t.uuid,"?"))&&En(null===t||void 0===t?void 0:t.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:30*ae.iI,rowGroupHeaders:i,rows:null===e||void 0===e?void 0:e.map((function(e,i){var t=e.blocks,o=e.created_at,u=e.description,l=e.schedules,c=e.tags,s=e.type,a=e.updated_at,p=e.uuid,f=t.filter((function(e){var n=e.type;return W.tf.SCRATCHPAD!==n})).length,v=l.length,h=l.find((function(e){var n=e.status;return pe.fq.ACTIVE===n})),g=s===D.ad,b=(0,S.jsx)("div",{children:(0,S.jsx)(L.Z,{tags:null===c||void 0===c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[v>=1||Be[p]?(0,S.jsx)(m.ZP,{iconOnly:!0,loading:!!Be[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,_e.j)(n),He((function(e){return Ie(Ie({},e),{},(0,r.Z)({},p,!0))})),In(Ie(Ie({},e),{},{status:h?pe.fq.INACTIVE:pe.fq.ACTIVE}))},children:h?(0,S.jsx)(q.Pause,{muted:!0,size:2*ae.iI}):(0,S.jsx)(q.PlayButtonFilled,{default:!0,size:2*ae.iI})}):null,(0,S.jsx)(k.ZP,{default:!h,monospace:!0,success:!!h,children:h?pe.fq.ACTIVE:v>=1?pe.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,S.jsx)(d(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,S.jsx)(E.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,S.jsx)(k.ZP,{default:!0,preWrap:!0,title:u,children:u},"pipeline_description_".concat(i)),(0,S.jsx)(k.ZP,{bold:g,danger:g,children:g?(0,he.kC)(D.ad):D.G7[s]},"pipeline_type_".concat(i)),(0,S.jsx)(k.ZP,{monospace:!0,small:!0,title:a?(0,me._6)(a):null,children:a?(0,me.XG)((0,me.d$)(a,{includeSeconds:!0,utcFormat:!0}),qe):(0,S.jsx)(S.Fragment,{children:"\u2014"})},"pipeline_updated_at_".concat(i)),(0,S.jsx)(k.ZP,{monospace:!0,small:!0,title:o?(0,me._6)(o):null,children:o?(0,me.XG)(o.slice(0,19),qe):(0,S.jsx)(S.Fragment,{children:"\u2014"})},"pipeline_created_at_".concat(i)),b,(0,S.jsx)(k.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,S.jsx)(k.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(i)),(0,S.jsxs)(x.Z,{flex:1,justifyContent:"flex-end",children:[(0,S.jsx)(m.ZP,Ie(Ie({},De),{},{onClick:function(){mn({pipelineUUID:p})},title:"Download (keep folder structure)",children:(0,S.jsx)(q.Save,{default:!0,size:2*ae.iI})})),(0,S.jsx)(P.Z,{mr:1}),(0,S.jsx)(m.ZP,Ie(Ie({},De),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,S.jsx)(q.Open,{default:!0,size:2*ae.iI})})),(0,S.jsx)(P.Z,{mr:1}),(0,S.jsx)(m.ZP,Ie(Ie({},De),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,S.jsx)(q.File,{default:!0,size:2*ae.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:o,sortableColumnIndexes:dn,sortedColumn:fn,stickyHeader:!0,uuid:"pipelines_table"})}),[wn,En,mn,qe,Be,n,Me,He,Re,Un,dn,fn,Xe,In]),ki=(0,a.useMemo)((function(){return Pi(cn,xi,_i)}),[cn,Pi,xi,_i]),Ii=(0,a.useMemo)((function(){return Pi(sn,wi,yi)}),[sn,Pi,wi,yi]),Ti=(0,a.useMemo)((function(){return(null===cn||void 0===cn?void 0:cn.length)||0}),[cn]),Si=(0,a.useMemo)((function(){return(null===sn||void 0===sn?void 0:sn.length)||0}),[sn]),Oi=(0,a.useMemo)((function(){return(!Ke||Se.uuid===We)&&!Ti||Ke&&Te.uuid===We&&!Si}),[Ke,Ti,Si,We]),Ei=(0,a.useMemo)((function(){var e=null===Ve||void 0===Ve?void 0:Ve[ce.$D.LIMIT];return(0,S.jsxs)(_.ZP,{alignItems:"center",children:[(0,S.jsx)(k.ZP,{muted:!0,small:!0,children:"Per page"}),(0,S.jsx)(P.Z,{mr:1}),(0,S.jsxs)($.Z,{compact:!0,onChange:function(e){var n;return(0,Ze.u)((n={},(0,r.Z)(n,ce.$D.LIMIT,e.target.value),(0,r.Z)(n,ce.$D.OFFSET,0),n),{pushHistory:!0})},small:!0,value:e,children:[e&&(e>5*A.Q||e%A.Q)&&(0,S.jsx)("option",{value:e,children:e}),(0,Ce.w6)(5).map((function(e,n){var i=(n+1)*A.Q;return(0,S.jsx)("option",{value:i,children:i},i)}))]})]})}),[Ve]),Ai=(0,a.useMemo)((function(){var e,n,i=en;Ke&&Te.uuid===We&&(i=un);var t=(null===(e=i)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.count)||0,o=(null===Ve||void 0===Ve?void 0:Ve[ce.$D.LIMIT])||A.Q,u=(null===Ve||void 0===Ve?void 0:Ve[ce.$D.OFFSET])||0,l=Math.ceil(t/o);return(0,S.jsx)(P.Z,{p:ae.cd,children:(0,S.jsx)(A.ZP,{maxPages:A.Et,onUpdate:function(e){var n=Number(e);(0,Ze.u)((0,r.Z)({},ce.$D.OFFSET,n*o))},page:Math.floor(u/o),totalPages:l})})}),[en,un,Ke,Ve,We]);return(0,S.jsxs)(Z.Z,{errors:Ye,setErrors:ze,subheaderChildren:(0,S.jsxs)(_.ZP,{alignItems:"center",justifyContent:"space-between",children:[li,Ei]}),title:"Pipelines",uuid:"pipelines/index",children:[Ke&&(0,S.jsx)(P.Z,{px:ae.cd,ref:i,children:(0,S.jsx)(g.Z,{noPadding:!0,onClickTab:function(e){var n,i=e.uuid;return(0,Ze.u)((n={},(0,r.Z)(n,Ee,i),(0,r.Z)(n,ce.$D.OFFSET,0),n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:We,tabs:Oe.map((function(e){var n=e.Icon,i=e.label;return{Icon:n,label:function(){var e;return i({count:null===en||void 0===en||null===(e=en.metadata)||void 0===e?void 0:e.count})},uuid:e.uuid}})),underlineStyle:!0})}),Oi?(0,S.jsx)(P.Z,{p:ae.Mq,children:en?(0,S.jsx)(k.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,S.jsx)(N.Z,{inverted:!0,large:!0})}):null,(0,S.jsxs)(ve.cl,{hide:Oi,includePadding:!!vn,maxHeight:"calc(100vh - ".concat(J.Mz+74+(R||44)+68,"px)"),children:[(!Ke||Se.uuid===We)&&ki,Ke&&Te.uuid===We&&Ii]}),(0,S.jsx)("div",{ref:l,children:Ai})]})}Me.getInitialProps=(0,t.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Re=(0,R.Z)(Me)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])},80022:function(e,n,i){"use strict";function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(n,{Z:function(){return t}})},15544:function(e,n,i){"use strict";function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}i.d(n,{Z:function(){return t}})},13692:function(e,n,i){"use strict";i.d(n,{Z:function(){return o}});var t=i(61049);function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,t.Z)(e,n)}},93189:function(e,n,i){"use strict";i.d(n,{Z:function(){return u}});var t=i(12539),o=i(80022);function u(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}}},function(e){e.O(0,[1557,4241,5544,523,3548,5627,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);